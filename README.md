# Opentracing-LiTe

Opentracing-LiTe is a distributed tracing framework built on the specification of https://opentracing.io. Those who want to learn more about opentracing, please refer to link https://opentracing.io/docs/overview/what-is-tracing/.

# Background

In a micro service based architecture, often there is a requirement to trace the request flow. Consider the below usecase:
There are two services: Employee Service and Department Service.

Here is the request flow:
1. User tries to create an employee along with the department (s)he belongs to.
1. It invokes the employee service end point.
1. Employee service creates the employee.
1. As part of the flow, invokes Department service to create the department.
1. Department service creates the department.
1. It sends response back to Employee service.
1. Employee service sends the final response to User.

In a cloud environment, there can be multiple POD instances running, each logging information in their own file (local/shared mountpoint). This log data is eventually shipped to some "Log Aggregator" (e.g., Splunk, Elasticsearch, etc) where they are indexed and stored. Later when developer wants to view the data, they can logging onto the dashboard and see the log. Today's Log Aggregator framework provides sophisticated searching capability to fetch the relevant log statements based on the input provided.

Once log data is shipped to a common store, they are all mixed up. Now if you want to trace a complete end-to-end flow you need some sort of correlation id that is present in all the log statements generated by the two services while serving a single request. What that means is, the client facing service must generate a unique id (call it traceId), dump it as part of the log statement, and pass it on to subsequent service(s) on the request chain. The next service(s) would use the same traceId and dump it in the log. Now if you search for a specific traceId on the Aggregator Dashboard, it should fetch you all the relevant logs that has this traceId present. And your request tracing is complete.

# Why Opentracing-LiTe

## Simple and easy to use
The core library of Opentracing lite is independent of any "logging framework". Even if you are not using any logging framework in your project, you can still use it. And if you have any standard logging framework for your project (as that is expected for any production ready app), the integration is seemless.

Typically developer uses different logging framework in their project. Some of the common frameworks are:
1. log4j2
1. logback
1. commons-logging
1. java util logging

Out of these, log4j2 and logback are stable framework, as they follow the standard/specification set by SLF4J.

Opentracing-Lite provides upfront support for all logging frameworks that are currently compliant with SLF4J. For other non-compliant logging framework, one has to write an adapter, and that, too, is very simple.

## Rich set of metrics
It exposes a set of MBeans to monitor the span creation, scope activation/deactivation, etc. User can monitor the behavior of the framework via any management console. There are other metrics currently being built that will give developer an idea about the trend. Note that, all these metrics are transient, that means, once you restart your app, you chance to loose these metrics. I may consider persisting these metrics, but currently that is out of scope.

## Schema less
Opentracing-LiTE does not have a schema on it's own. It does not enforce it either. It relies on the format defined by the developer. There are few reasons for that. Main reason being, it always tries to be developer-friendly. A developer who used to see the logs in the plain text format, should not be forced to switch to a different format, like xml of json. As it may hinder the visibility. 

Opentracing-LiTE, on the other side give developers the freedom to choose the schema and/or format thet want to define, and start logging in prescribed format.

## Libraried for popular framework
It provides the ready-made libraries for popular framework.

# How to use

